.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "IPC_LISTENER_FROMFD" "3" "" "libdill" "libdill Library Functions"
.hy
.SH NAME
.PP
ipc_listener_fromfd \- wraps an existing OS\-level file descriptor
.SH SYNOPSIS
.IP
.nf
\f[C]
#include\ <libdill.h>

int\ ipc_listener_fromfd(
\ \ \ \ int\ fd);
\f[]
.fi
.SH DESCRIPTION
.PP
IPC protocol is a bytestream protocol for transporting data among
processes on the same machine.
It is an equivalent to POSIX \f[B]AF_LOCAL\f[] sockets.
.PP
This function wraps an existing OS\-level file descriptor.
.PP
\f[B]fd\f[]: File descriptor of a listening UNIX domain socket to wrap.
.PP
The socket can be cleanly shut down using \f[B]ipc_close\f[] function
which will also close the underlying file descriptor.
.PP
There\[aq]s no way to unwrap the file descriptor.
.PP
This function is not available if libdill is compiled with
\f[B]\-\-disable\-sockets\f[] option.
.SH RETURN VALUE
.PP
In case of success the function returns newly created socket handle.
In case of error it returns \-1 and sets \f[B]errno\f[] to one of the
values below.
.SH ERRORS
.IP \[bu] 2
\f[B]EMFILE\f[]: The maximum number of file descriptors in the process
are already open.
.IP \[bu] 2
\f[B]ENFILE\f[]: The maximum number of file descriptors in the system
are already open.
.IP \[bu] 2
\f[B]ENOMEM\f[]: Not enough memory.
.SH EXAMPLE
.IP
.nf
\f[C]
int\ fd\ =\ socket(AF_UNIX,\ SOCK_STREAM,\ 0);
bind(fd,\ addr,\ sizeof(addr));
listen(fd,\ 10);
int\ s\ =\ ipc_listener_fromfd(fd);
\f[]
.fi
.SH SEE ALSO
.PP
\f[B]brecv\f[](3) \f[B]brecvl\f[](3) \f[B]bsend\f[](3)
\f[B]bsendl\f[](3) \f[B]hclose\f[](3) \f[B]ipc_accept\f[](3)
\f[B]ipc_accept_mem\f[](3) \f[B]ipc_close\f[](3) \f[B]ipc_connect\f[](3)
\f[B]ipc_connect_mem\f[](3) \f[B]ipc_done\f[](3) \f[B]ipc_fromfd\f[](3)
\f[B]ipc_fromfd_mem\f[](3) \f[B]ipc_listen\f[](3)
\f[B]ipc_listen_mem\f[](3) \f[B]ipc_listener_fromfd_mem\f[](3)
\f[B]ipc_pair\f[](3) \f[B]ipc_pair_mem\f[](3)
